{% extends 'base.html' %}


{% block content %}
<section id="demo">
    
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2>Demo</h2>
                <hr>
            </div>
        
{% block viz %}
<script>
var data;

d3.json('http://localhost:5000/_viz_streamer', function(error, json) {
    if (error) return console.warn(error);
    data = json;

    height = 960;
    width = 540;

    nv.addGraph(function() {
        var chart = nv.models.pieChart()
            .x(function(d) {return d.key})
            .y(function(d) {return d.doc_count})
            .showLabels(true);

        d3.select("#chart svg")
            .datum(data)
            .transition().duration(350)
            .call(chart);

        nv.utils.windowResize(chart.update);
        return chart;
    });
});
</script>

<section id="chart">
<div id="chart">
<div class="col-lg-12 text-center">
<h3>Viz</h3><hr></div>
<svg></svg></div></section>
{% endblock %}

{% block table %}

<section id="table">
<div class="col-lg-12 text-center">
<h3>Table</h3><hr></div>
    <table id="subs_list" class="display">
        <thead>
                <tr>
                    <th>Overheid</th>
                    <th>Regeling</th>
                    <th>Ontvanger</th>
                    <th>Beleid</th>
                    <th>Realisatie</th>
                    <th>Jaar</th>
                </tr>
        </thead>
        <tbody>
            {% for d in data %}
            <tr>
                <th>{{d.overheid}}</th>
                <th>{{d.regeling}}</th>
                <th>{{d.ontvanger}}</th>
                <th>{{d.beleid}}</th>
                <th>{{d.realisatie}}</th>
                <th>{{d.jaar}}</th>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                    <th>Overheid</th>
                    <th>Regeling</th>
                    <th>Ontvanger</th>
                    <th>Beleid</th>
                    <th>Realisatie</th>
                    <th>Jaar</th>
            </tr>
        </tfoot>
    </table></section>
    </div></div></section>
{% endblock %}

{% endblock %}